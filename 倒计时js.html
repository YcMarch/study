<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="gb2312">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>倒计时</title>
</head>

<body>

  <div>
    <p>
    <span id="timeTit"></span>  <span id="_d"></span><span id="_h"></span><span id="_m"></span><span id="_s"></span>
    </p>
  </div>

  <script type="text/javascript">

    //设置开始时间
    var begDate = new Date("2018-10-12 16:09:00");
    //设置结束时间
    var endDate = new Date("2018-10-18 16:29:00");
    var end = endDate.getTime(); // 结束秒数
    var beg = begDate.getTime(); // 开始秒数

    function countTime() {
      //获取当前时间
      var date = new Date();
      // 当前时间秒数
      var now = date.getTime();
      //时间差
      var leftTime = end - now; // 结束秒数 - 现在秒数
      var begTime = beg - now;  // 开始秒数 - 现在秒数
      //定义变量 d,h,m,s保存倒计时的时间
      var d, h, m, s;
      var timeTit = document.getElementById('timeTit'); // 时间前文档
      if(begTime>=0){ //  如果开始时间大于等于0 的时候 执行
        timeTit.innerHTML = '距离活动开始'
        d = Math.floor(begTime / 1000 / 60 / 60 / 24);
        h = Math.floor(begTime / 1000 / 60 / 60 % 24);
        m = Math.floor(begTime / 1000 / 60 % 60);
        s = Math.floor(begTime / 1000 % 60);

        document.getElementById("_d").innerHTML = d>=10?d+ "天":'0'+d + "天";
        document.getElementById("_h").innerHTML = h>=10?h+ "时":'0'+h + "时";
        document.getElementById("_m").innerHTML = m>=10?m+ "分":'0'+m + "分";
        document.getElementById("_s").innerHTML = s>=10?s+ "秒":'0'+s + "秒";
      }else if (leftTime >= 0) { // 当结束时间大于等于0 的时候执行这里
        timeTit.innerHTML = '距离活动结束'
        d = Math.floor(leftTime / 1000 / 60 / 60 / 24);
        h = Math.floor(leftTime / 1000 / 60 / 60 % 24);
        m = Math.floor(leftTime / 1000 / 60 % 60);
        s = Math.floor(leftTime / 1000 % 60);
        //将倒计时赋值到div中
        document.getElementById("_d").innerHTML = d>=10?d+ "天":'0'+d + "天";
        document.getElementById("_h").innerHTML = h>=10?h+ "时":'0'+h + "时";
        document.getElementById("_m").innerHTML = m>=10?m+ "分":'0'+m + "分";
        document.getElementById("_s").innerHTML = s>=10?s+ "秒":'0'+s + "秒";
        //递归每秒调用countTime方法，显示动态时间效果

      } else {  // 结束的时候执行这里
        timeTit.innerHTML = '活动已经结束';
        clearTimeout(countTime); //  结束的时候清除定时器
        return;  // 并停止这个函数
      }
      setTimeout(countTime, 1000); // 每一秒执行一次这个函数
    }
    countTime(); // 执行函数
  </script>

</body>
</html>
